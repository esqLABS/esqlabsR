<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Get Started • esqlabsR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">esqlabsR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">5.5.0.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/esqlabsR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>esqlabsR Workflow</h6></li>
    <li><a class="dropdown-item" href="../articles/workflow-overview.html">Overview</a></li>
    <li><a class="dropdown-item" href="../articles/project-structure.html">1. Initialize a Project</a></li>
    <li><a class="dropdown-item" href="../articles/design-scenarios.html">2. Design Scenarios</a></li>
    <li><a class="dropdown-item" href="../articles/run-simulations.html">3. Run Simulations</a></li>
    <li><a class="dropdown-item" href="../articles/plot-results.html">4. Plot Results</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Miscellaneous</h6></li>
    <li><a class="dropdown-item" href="../articles/presentations.html">Presentations</a></li>
    <li><a class="dropdown-item" href="../articles/sensitivity.html">Sensitivity Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/sensitivity-plots.html">Sensitivity Analysis – Plot Customization</a></li>
    <li><a class="dropdown-item" href="../articles/advanced.html">Advanced Topics</a></li>
    <li><a class="dropdown-item" href="../articles/project-migration-guide.html">Migrating Project Structure Versions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/esqLABS/esqlabsR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/esqLABS/esqlabsR/blob/main/vignettes/esqlabsR.Rmd" class="external-link"><code>vignettes/esqlabsR.Rmd</code></a></small>
      <div class="d-none name"><code>esqlabsR.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><a href="https://github.com/esqLABS/esqlabsR" class="external-link">esqlabsR</a> is designed to make life easier for OSPS
users. The workflows implemented in this package rely on simple
concepts:</p>
<ul>
<li>a predefined project folder structure,</li>
<li>Excel files for definition of simulation scenarios out outputs.</li>
</ul>
</div>
<div class="section level2">
<h2 id="initialize-project">Initialize Project<a class="anchor" aria-label="anchor" href="#initialize-project"></a>
</h2>
<p><a href="https://github.com/esqLABS/esqlabsR" class="external-link">esqlabsR</a> facilitates modeling and simulation workflows
with OSPS relying on a well defined project structure based on Excel
files. These files are organized in different folders and their
structure must not be altered.</p>
<p>A new project folder can be initialized with the
<code><a href="../reference/initProject.html">initProject()</a></code> function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/esqLABS/esqlabsR" class="external-link">esqlabsR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/initProject.html">initProject</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>It will create the expected simulation project’s folder structure,
which is described in details in
<code><a href="../articles/project-structure.html">vignette("project-structure")</a></code>.</p>
<p>Each one of these folders contains a series of <code>.xlsx</code>
files with specific purpose. They are all linked to the project through
the <code>ProjectConfiguration.xlsx</code> file located in the root of
the project folder.</p>
<p>This file defines <em>where</em> all the necessary files are stored
in the project folder. This file is already preconfigured and should not
be changed in most cases. However, if target files would come to change
location, <code>ProjectConfiguration.xlsx</code> should reflect that.
All the path specified in the <code>Value</code> column should be
<em>relative</em> to the <code>ProjectConfiguration.xlsx</code>
location.</p>
<p>Loading the project configuration is the first step in any workflow
using <a href="https://github.com/esqLABS/esqlabsR" class="external-link">esqlabsR</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_project_configuration</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createProjectConfiguration.html">createProjectConfiguration</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"path/to/ProjectConfiguration.xlsx"</span><span class="op">)</span></span></code></pre></div>
<pre><code>ProjectConfiguration: 
   ...
   Model folder: Models/Simulations 
   Configurations folder: Configurations 
   Model Parameters: Configurations/ModelParameters.xlsx 
   Individuals: Configurations/Individuals.xlsx 
   Populations: Configurations/Populations.xlsx 
   Populations Folder: Configurations/PopulationsCSV 
   Scenarios: Configurations/Scenarios.xlsx 
...</code></pre>
<p>Note that the <code>ProjectConfiguration</code> stores paths to other
files that are used in the project.</p>
<p>To create an example <code>ProjectConfiguration</code> and execute
the rest of this tutorial, run the following:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_project_configuration</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createProjectConfiguration.html">createProjectConfiguration</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="../reference/exampleProjectConfigurationPath.html">exampleProjectConfigurationPath</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="version-control-and-project-sharing">Version Control and Project Sharing<a class="anchor" aria-label="anchor" href="#version-control-and-project-sharing"></a>
</h2>
<p><code>esqlabsR</code> provides powerful version control capabilities
through project configuration snapshots. This allows you to:</p>
<ul>
<li>
<strong>Track changes</strong> to your project configuration in
version control systems like Git</li>
<li>
<strong>Share projects</strong> with team members easily<br>
</li>
<li>
<strong>Create backups</strong> before making significant
changes</li>
<li>
<strong>Ensure reproducibility</strong> across different
environments</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a JSON snapshot of your project configuration</span></span>
<span><span class="fu"><a href="../reference/snapshotProjectConfiguration.html">snapshotProjectConfiguration</a></span><span class="op">(</span><span class="va">my_project_configuration</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Share the JSON file with team members or commit to version control</span></span>
<span><span class="co"># Later, restore the project configuration from the snapshot</span></span>
<span><span class="va">restored_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/restoreProjectConfiguration.html">restoreProjectConfiguration</a></span><span class="op">(</span><span class="st">"ProjectConfiguration.json"</span><span class="op">)</span></span></code></pre></div>
<p>For comprehensive information about version control features,
workflows, and best practices, see the “Version Control and Project
Sharing” section in <code><a href="../articles/project-structure.html">vignette("project-structure")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="design-scenarios">Design Scenarios<a class="anchor" aria-label="anchor" href="#design-scenarios"></a>
</h2>
<p>Now that the project’s file structure is ready, the next step is to
run simulations. In <a href="https://github.com/esqLABS/esqlabsR" class="external-link">esqlabsR</a>, simulation are run by
defining and executing multiple <strong>scenarios</strong>.</p>
<p>To modify, add or delete a scenario, edit the
<code>Parameters/Scenarios.xslx</code> file. Each row of this file
defines a simulation scenario.</p>
<p>The main properties that can be defined for a scenario are:</p>
<ul>
<li>
<code>ModelFile</code> is the name of the <code>.pkml</code> file
that can be found in the <code>Models/</code> directory.</li>
<li>
<code>ModelParameterSheets</code> are the names of the
<em>sheets</em> in <code>Parameters/ModelParameters.xlsx</code> that
contain the parameters to apply to the model,</li>
<li>
<code>ApplicationProtocol</code> is the name of the <em>sheet</em>
in <code>Parameters/ApplicationParameters.xlsx</code> that specify the
simulated administration protocol,</li>
<li>
<code>SimulationTime</code> and <code>SimulationTimeUnit</code>
define the time range to simulate, it should be three numbers for
<code>{start, end, resolution}</code>
</li>
<li>
<code>Individuald</code>: the id of the individual to simulate. The
id and settings for individuals are defined in
<code>Parameters/Individuals.xlsx</code>,</li>
<li>
<code>PopulationId</code>: the id of the <em>population</em> to
simulate. The id and settings for populations are defined in
<code>Parameters/PopulationParameters.xlsx</code>.</li>
</ul>
<p>Note that multiple aspects of a simulation scenario are defined in
other excel files, and the <code>Scenarios.xslx</code> file links to the
specific sheets or other information stored in those files.</p>
<p><img src="Figures/scenarios_links_files.png"></p>
<p>For example, if we want to change the characteristic of the
individual used in the simulation, we must add a new row with a
different <code>IndividualId</code> in the
<code>IndividualBiometrics</code> sheet of
the<code>Individuals.xlsx</code> file and/or specify a parameter sheet
with this <code>IndividualId</code> in the same file.</p>
<p>For more information on all the scenario parameters that can be
setup, read <code><a href="../articles/design-scenarios.html">vignette("design-scenarios")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="run-scenarios">Run Scenarios<a class="anchor" aria-label="anchor" href="#run-scenarios"></a>
</h2>
<p>Once all the scenario properties are set up in the excel files, we
can import <code>ScenarioConfiguration</code> using
<code><a href="../reference/readScenarioConfigurationFromExcel.html">readScenarioConfigurationFromExcel()</a></code> and create
<code>Scenario</code> objects with <code><a href="../reference/createScenarios.html">createScenarios()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_scenarios</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createScenarios.html">createScenarios</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/readScenarioConfigurationFromExcel.html">readScenarioConfigurationFromExcel</a></span><span class="op">(</span></span>
<span>    scenarioNames <span class="op">=</span> <span class="st">"TestScenario"</span>,</span>
<span>    projectConfiguration <span class="op">=</span> <span class="va">my_project_configuration</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then, we run the simulations by passing the scenarios we defined:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myScenarioResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runScenarios.html">runScenarios</a></span><span class="op">(</span><span class="va">my_scenarios</span><span class="op">)</span></span></code></pre></div>
<p>Simulation results can be saved for later use:
<code><a href="../reference/saveScenarioResults.html">saveScenarioResults()</a></code> and
<code><a href="../reference/loadScenarioResults.html">loadScenarioResults()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/saveScenarioResults.html">saveScenarioResults</a></span><span class="op">(</span><span class="va">myScenarioResults</span>,</span>
<span>  projectConfiguration <span class="op">=</span> <span class="va">my_project_configuration</span>,</span>
<span>  outputFolder <span class="op">=</span> <span class="va">my_project_configuration</span><span class="op">$</span><span class="va">outputFolder</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">myScenarioResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadScenarioResults.html">loadScenarioResults</a></span><span class="op">(</span></span>
<span>  scenarioNames <span class="op">=</span> <span class="st">"TestScenario"</span>,</span>
<span>  resultsFolder <span class="op">=</span> <span class="va">my_project_configuration</span><span class="op">$</span><span class="va">outputFolder</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Learn more on how to run simulations in
<code><a href="../articles/run-simulations.html">vignette("run-simulations")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="plot-results">Plot Results<a class="anchor" aria-label="anchor" href="#plot-results"></a>
</h2>
<p>The simulation results can now be plotted. For this, the package
relies on on the concept of combining multiple simulation results and
observed data using the <code>DataCombined</code> class and creating
figures using functions implemented in the <a href="https://github.com/open-systems-pharmacology/ospsuite-r" class="external-link">ospsuite</a>
package.</p>
<p>First, a <code>DataCombined</code> object is initialized:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_datacombined</span> <span class="op">&lt;-</span> <span class="va"><a href="https://www.open-systems-pharmacology.org/OSPSuite-R/reference/DataCombined.html" class="external-link">DataCombined</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Then, simulation result are added to the dataCombined object:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_datacombined</span><span class="op">$</span><span class="fu">addSimulationResults</span><span class="op">(</span><span class="va">myScenarioResults</span><span class="op">$</span><span class="va">TestScenario</span><span class="op">$</span><span class="va">results</span>,</span>
<span>  names <span class="op">=</span> <span class="st">"Simulated"</span>,</span>
<span>  groups <span class="op">=</span> <span class="st">"Aciclovir"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Finally, the plot is generated:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://www.open-systems-pharmacology.org/OSPSuite-R/reference/plotIndividualTimeProfile.html" class="external-link">plotIndividualTimeProfile</a></span><span class="op">(</span><span class="va">my_datacombined</span><span class="op">)</span></span></code></pre></div>
<p><img src="esqlabsR_files/figure-html/unnamed-chunk-12-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>In some cases, we also want to plot the observed experimental data
(stored in <code>Data/</code>). <code>DataCombined</code> also has the
ability to store observed data for them to be plotted.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">observed_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadObservedData.html">loadObservedData</a></span><span class="op">(</span></span>
<span>  projectConfiguration <span class="op">=</span> <span class="va">my_project_configuration</span>,</span>
<span>  sheets <span class="op">=</span> <span class="st">"Laskin 1982.Group A"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_datacombined</span><span class="op">$</span><span class="fu">addDataSets</span><span class="op">(</span><span class="va">observed_data</span>, names <span class="op">=</span> <span class="st">"Observed"</span>, groups <span class="op">=</span> <span class="st">"Aciclovir"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://www.open-systems-pharmacology.org/OSPSuite-R/reference/plotObservedVsSimulated.html" class="external-link">plotObservedVsSimulated</a></span><span class="op">(</span><span class="va">my_datacombined</span><span class="op">)</span></span></code></pre></div>
<p><img src="esqlabsR_files/figure-html/unnamed-chunk-13-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>Many other plot types are available in <a href="https://github.com/esqLABS/esqlabsR" class="external-link">esqlabsR</a>, read
<code><a href="../articles/plot-results.html">vignette("plot-results")</a></code> to learn more.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://esqlabs.com/" class="external-link"><img src="https://esqlabs.github.io/esqlabsR/reference/figures/circles.png" style="max-width:33px">esqLABS</a>, Pavel Balazki, Johanna Eitel, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>, Sergei Vavilov, <a href="https://github.com/Felixmil" class="external-link">Felix Mil</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
