---
title: "1. Initialize a Project"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{esqlabs-project-structure}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE, warning = FALSE, message = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.showtext = TRUE
)
library(esqlabsR)
```


## Initialize the Project Structure

Project Structure can be initialized by calling the function `init_project()`.

```{r, eval=FALSE, message = FALSE}
library(esqlabsR)

init_project()
```

This will create a set of directories and files that match the expected project's 
structure.


```{r, echo = FALSE}
fs::dir_tree(path = esqlabsR:::example_directory("TestProject"), glob = "*.md|*.R", invert = TRUE)
```
## Create a ProjectConfiguration

The `ProjectConfiguration` stores the paths to the model-, data-, and other files
and directories. It will be used at several steps in `esqlabsR` workflows so it 
needs to be created before performing any simulations.

By printing the `ProjectConfiguration`, we can see the locations of all files 
used in the workflows:

```{r, eval = TRUE}
my_project_configuration <- createProjectConfiguration(path = example_ProjectConfiguration())
```

Now that the project structure is initialized and the `ProjectConfiguration` is 
created, read `vignette("esqlabsR-design-scenarios")` to continue the process.
To learn more about `ProjectConfiguration`, read the following sections.

## Details

### Change ProjectConfiguration from R

If required, you can change the location of one of the files or folders using relative or absolute paths

```{r, eval=FALSE}
# change the location of the output folder
projectConfiguration$outputFolder <- "../anotherOutputFolder"

# change the location of the model parameters file
projectConfiguration$modelParametersFile <- "absolute/path/to/anotherModelParameters.xlsx"
```


### About `ProjectConfiguration.xlsx`

The `ProjectConfiguration.xlsx` file will be used by `esqlabsR` to generate a
`ProjectConfiguration` object which is the central piece of a project. It should 
be located in the root folder of the project.

This file defines *where* all the necessary files are stored in the project 
folder. All the path specified in the `Value` column should be *relative* to the
`ProjectConfiguration.xlsx` location.

All these directories and files have a specific purpose and template and are 
describe in next sections.

```{r, echo = FALSE}
ProjectConfiguration_excel <- readxl::read_xlsx(example_ProjectConfiguration())

reactable::reactable(ProjectConfiguration_excel,
  columns = list(
    "Property" = reactable::colDef(minWidth = 50),
    "Value" = reactable::colDef(show = FALSE),
    "Description" = reactable::colDef(minWidth = 100)
  ),
  outlined = TRUE,
  pagination = FALSE,
  highlight = TRUE
)
```


<!-- #### `Data/` -->
<!-- The `Data/` folder should contain all the Excel files with observed experimental  -->
<!-- data. -->

<!-- #### `Models/` -->
<!-- The `Models/` folder should contain all the `.pkml` files generated with the  -->
<!-- OSPS suite. -->

<!-- #### `Parameters/` -->
<!-- The `Parameters/` folder contains all the main Excel templates that serve as  -->
<!-- inputs to parameterize the simulations, plot outputs *etc.* -->

<!-- #### `Results/` -->
<!-- The `Results/` is where Figures and SimulationResults outputs generated by -->
<!-- `esqlabsR` will be written by default. -->

