---
title: "Data handling"
output: 
  rmarkdown::html_vignette:
    toc: true
#output: pdf_document
vignette: >
  %\VignetteIndexEntry{Data handling}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>", 
  eval = FALSE
)
```

```{r, echo = FALSE, results = "hide", message = FALSE}
library(esqlabsR)
```

The workflow of modeling and simulation involves running simulations and comparing simulated data against observed data. The observed data must come in Excel files and can be loaded into the R environment with a `loadObservedData()` helper function. The following code loads data from an Excel file in `/tests/data` into an `observedData` variable. 
``` {r}
projectConfiguration <- createDefaultProjectConfiguration()
dataSheets <- "<Study Id 1>"
observedData <- loadObservedData(projectConfiguration = projectConfiguration, sheets = dataSheets)
```

The `createDefaultProjectConfiguration()` function assumes that the working folder has a `ProjectConfiguration.xlsx` Excel file. A default configuration file is shipped with the package: [/tests/data](https://github.com/esqLABS/esqlabsR/tree/develop/tests/data). The `ProjectConfiguration.xlsx` file and the `projectConfiguration` class instance will contain the path to the Excel file with observed data.

The `loadObservedData()` function returns a list of `DataSet` class instances. The resulting object will be used later to [run simulations](example-workflow.html), [plot results](example-visualization.html) and [run a sensitivity analysis](example-sensitivity.html).

More detailed information on function signatures can be found in:

* `esqlabsR` documentation on:
    * [createDefaultProjectConfiguration()](https://esqlabs.github.io/esqlabsR/reference/createDefaultProjectConfiguration.html)
    * [ProjectConfiguration class](https://esqlabs.github.io/esqlabsR/reference/ProjectConfiguration.html)
    * [loadObservedData()](https://esqlabs.github.io/esqlabsR/reference/loadObservedData.html)
* `ospsuite` documentation on:
    * [DataImporterConfiguration class](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/DataImporterConfiguration.html)
    * [createImporterConfigurationForFile()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/createImporterConfigurationForFile.html)
    * [loadDataImporterConfiguration()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/loadDataImporterConfiguration.html)
    * [DataSet class](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/DataSet.html)
    * [dataSetToDataFrame()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/dataSetToDataFrame.html)
    * [loadDataSetsFromExcel()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/loadDataSetsFromExcel.html)
    * [loadDataSetFromPKML()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/loadDataSetFromPKML.html)
    * [saveDataSetToPKML()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/saveDataSetToPKML.html)
