---
title: "Data handling"
output: 
  rmarkdown::html_vignette:
    toc: true
#output: pdf_document
vignette: >
  %\VignetteIndexEntry{Data handling}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r, echo = FALSE, results = "hide", message = FALSE}
library(esqlabsR)
```

The workflow of modeling and simulation involves running simulations and comparing simulated data against observed data. Functionalities of `esqlabsR` require observed data to be present as [`DataSet`](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/DataSet.html) objects. Please refer to the article [Observed data](https://www.open-systems-pharmacology.org/OSPSuite-R/articles/observed-data.html) for information on how to load data from excel or *.pkml files.

The function `loadObservedData()` facilitates loading data in standard esqlabs projects. Assuming the standard project folder structure with observed data being present in the "Data" folder, loading data can be done with the following code:

```{r loadObservedData}
setwd("../tests/data/TestProject/Code/")
# Create a ProjectConfiguration based on the file located in `tests/data/TestProject/Code`
projectConfiguration <- createDefaultProjectConfiguration()
dataSheets <- "Laskin 1982.Group A"
observedData <- loadObservedData(projectConfiguration = projectConfiguration, sheets = dataSheets)

print(names(observedData))
```
The function will load from the excel file specified in the `ProjectConfiguration.xlsx`. 
The function returns a list of `DataSet` class instances. The resulting object 
will be used later to [run simulations](example-workflow.html), 
[plot results](example-visualization.html) and 
[run a sensitivity analysis](example-sensitivity.html).

More detailed information on function signatures can be found in:

* `esqlabsR` documentation on:
    * [createDefaultProjectConfiguration()](https://esqlabs.github.io/esqlabsR/reference/createDefaultProjectConfiguration.html)
    * [ProjectConfiguration class](https://esqlabs.github.io/esqlabsR/reference/ProjectConfiguration.html)
    * [loadObservedData()](https://esqlabs.github.io/esqlabsR/reference/loadObservedData.html)
* `ospsuite` documentation on:
    * [DataImporterConfiguration class](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/DataImporterConfiguration.html)
    * [createImporterConfigurationForFile()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/createImporterConfigurationForFile.html)
    * [loadDataImporterConfiguration()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/loadDataImporterConfiguration.html)
    * [DataSet class](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/DataSet.html)
    * [dataSetToDataFrame()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/dataSetToDataFrame.html)
    * [loadDataSetsFromExcel()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/loadDataSetsFromExcel.html)
    * [loadDataSetFromPKML()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/loadDataSetFromPKML.html)
    * [saveDataSetToPKML()](https://www.open-systems-pharmacology.org/OSPSuite-R/reference/saveDataSetToPKML.html)
